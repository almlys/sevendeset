<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE bootstrap SYSTEM "http://7d7.almlys.org/spec/draft/BootStrap.dtd">
<bootstrap default_target='sd7'>

	<module name='cg' ignore='no'>
		<comment>
			Unfortunately the next library is not Open Source
			This is the 32 bits version of the library
			Check: http://developer.nvidia.com/object/cg_toolkit.html for more info
			Note: Ogre can be compiled without the cg library, but well, you now how things will look without it.
		</comment>
		<license>Propietary</license>

		<source addr='http://7d7.almlys.org/downloads/depends/cg/Cg-2.0_May2008_x86.tgz'
						method='wget' renamefrom='usr'
						md5='311069e73186b3a7837d35df08b714c8'
						platform='linux' arch='i686' />
		<source addr='http://developer.download.nvidia.com/cg/Cg_2.0/2.0.0015/Cg-2.0_May2008_x86.tgz'
						method='wget' renamefrom='usr'
						md5='311069e73186b3a7837d35df08b714c8'
						platform='linux' arch='i686' />
		<source addr='http://7d7.almlys.org/downloads/depends/cg/Cg-2.0_May2008_x86_64.tgz'
						method='wget' renamefrom='usr'
						md5='f0923e9fe9c0e0f1b1f49e9069c59815'
						platform='linux' arch='x86_64' />
		<source addr='http://developer.download.nvidia.com/cg/Cg_2.0/2.0.0015/Cg-2.0_May2008_x86_64.tgz'
						method='wget' renamefrom='usr'
						md5='f0923e9fe9c0e0f1b1f49e9069c59815'
						platform='linux' arch='x86_64' />

		<install>
			<cmd>cp -rvp * $PREFIX</cmd>
		</install>
	</module>
	
	<module name='ilmbase' ignore='no'>
		<comment>
			Base library for openEXR
		</comment>
		<license>BSD</license>
		<source addr='http://7d7.almlys.org/downloads/depends/openexr/ilmbase-1.0.1.tar.gz'
						method='wget' renamefrom='ilmbase-1.0.1'
						md5='f76f094e69a6079b0beb93d97e2a217e'/>
		<source addr='http://download.savannah.nongnu.org/releases/openexr/ilmbase-1.0.1.tar.gz'
						method='wget' renamefrom='ilmbase-1.0.1'
						md5='f76f094e69a6079b0beb93d97e2a217e'/>
		<build>
			<cmd>./configure --prefix=$PREFIX</cmd>
			<cmd>make -j 2</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>
	
	<module name='openexr' ignore='no' depends='ilmbase'>
		<comment>
			Optional Library for OpenEXR HDR image file format
		</comment>
		<license>BSD</license>
		<source addr='http://7d7.almlys.org/downloads/depends/openexr/openexr-1.6.1.tar.gz'
						method='wget' renamefrom='openexr-1.6.1'
						md5='11951f164f9c872b183df75e66de145a'/>
		<source addr='http://download.savannah.nongnu.org/releases/openexr/openexr-1.6.1.tar.gz'
						method='wget' renamefrom='openexr-1.6.1'
						md5='11951f164f9c872b183df75e66de145a'/>
		<patch addr="openexr.patch" />
		<build>
			<cmd>./configure --prefix=$PREFIX</cmd>
			<cmd>make -j 2</cmd>
		</build>
		<clean>
			<cmd>make distclean</cmd>
		</clean>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>

	<module name='freeimage' ignore='no' >
		<comment>
			Graphics support library
		</comment>
		<license>(dual) GPLv2 or later / FreeImage Public License</license>
		<!-- This version is broken on 64 bits platforms 
		<source addr='http://7d7.almlys.org/downloads/depends/freeimage/FreeImage3100.zip'
						method='wget' renamefrom='FreeImage'
						md5='2e57135e26bb487cc8e13ee7b7e0a595' />
		<source addr='http://downloads.sourceforge.net/freeimage/FreeImage3100.zip'
						method='wget' renamefrom='FreeImage'
						md5='2e57135e26bb487cc8e13ee7b7e0a595' />
		-->

		<source addr='http://7d7.almlys.org/downloads/depends/freeimage/freeimage20080727.tar.bz2'
						method='wget' renamefrom='freeimage'
						md5='c4b145fbefd4c7869a8c7180ce4ba20e'
						branch='stable' />

		<source addr=':pserver:anonymous@freeimage.cvs.sourceforge.net:/cvsroot/freeimage'
						method='cvs' module='FreeImage' revision='20080727' renamefrom='FreeImage'
						branch='stable' />
		<source addr=':pserver:anonymous@freeimage.cvs.sourceforge.net:/cvsroot/freeimage'
						method='cvs' module='FreeImage' renamefrom='FreeImage'
						branch='devel' />

		<build>
			<!-- Dirty patch grabben from python-ogre distribution -->
			<cmd>sed --in-place -s 's|/usr/include|\$(DESTINC)|' Makefile.*</cmd>
			<cmd>sed --in-place -s 's|/usr/lib|\$(DESTLIB)|' Makefile.*</cmd>
			<cmd>sed --in-place -s 's|-o root -g root||' Makefile.*</cmd>
			<cmd>sed --in-place -s 's|ldconfig||' Makefile.*</cmd>
			<!-- End dirty patch -->
			<cmd>make</cmd>
		</build>
		<install>
			<cmd>make DESTINC=$PREFIX/include DESTLIB=$PREFIX/lib install</cmd>
		</install>
	</module>

	<module name='pcre' ignore='no' >
		<comment>
			Regular expression library
			(Not installed on the UdL Fedora's, or it's not the correct version)
		</comment>
		<license>BSD</license>
		<source addr='http://7d7.almlys.org/downloads/depends/pcre/pcre-7.7.tar.bz2'
						method='wget' renamefrom='pcre-7.7'
						md5='4b2e9cde1f7227448dddba59843efa0b' />
		<source addr='http://downloads.sourceforge.net/pcre/pcre-7.7.tar.bz2'
						method='wget' renamefrom='pcre-7.7'
						md5='4b2e9cde1f7227448dddba59843efa0b' />
		<build>
			<cmd>./configure --prefix=$PREFIX --enable-unicode-properties</cmd>
			<cmd>make -j 2</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>

	<module name='zziplib' ignore='no' >
		<comment>
			Library for opening zip files
		</comment>
		<license>LGPL/MPL</license>
		<source addr='http://7d7.almlys.org/downloads/depends/zziplib/zziplib-0.13.49.tar.bz2'
						method='wget' renamefrom='zziplib-0.13.49'
						md5='5f7b88ebb2bcd7e8044328482d079661' />
		<source addr='http://downloads.sourceforge.net/zziplib/zziplib-0.13.49.tar.bz2'
						method='wget' renamefrom='zziplib-0.13.49'
						md5='5f7b88ebb2bcd7e8044328482d079661' />
		<build>
			<cmd>./configure --prefix=$PREFIX --datadir=$PREFIX/share</cmd>
			<cmd>make -j 2</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>


	<module name='ois' ignore='no' depends='freeimage' >
		<comment>
			Object Oriented Input System
		</comment>
		<license>zlib/libpng</license>
		<!--
		<source addr='http://7d7.almlys.org/downloads/depends/ois/ois-1.0RC1.tar.gz'
						method='wget' renamefrom='ois-1.0RC1'
						md5='05cbd131fb0477e1cbd4b115ccef2c90'/>
		<source addr='http://prdownloads.sourceforge.net/wgois/ois-1.0RC1.tar.gz'
						method='wget' renamefrom='ois-1.0RC1'
						md5='05cbd131fb0477e1cbd4b115ccef2c90'/>
		<patch addr='ois.patch' />
		-->
		<source addr='http://7d7.almlys.org/downloads/depends/ois/ois_1.2.0.tar.gz'
						method='wget'
						md5='6a8cedad04f095127ca1455162fec955'/>
		<source addr='http://downloads.sourceforge.net/wgois/ois_1.2.0.tar.gz'
						method='wget'
						md5='6a8cedad04f095127ca1455162fec955'/>
		<build>
			<cmd>./bootstrap</cmd>
			<cmd>./configure --prefix=$PREFIX</cmd>
			<cmd>make -j 2</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>

	<module name='cegui' ignore='no'>
		<comment>
			GUI
		</comment>
		<license>MIT</license>
		<!--
		<source addr='http://7d7.almlys.org/downloads/depends/cegui/CEGUI-0.5.0b.tar.gz'
						method='wget' renamefrom='CEGUI-0.5.0'
						md5='b42322a33c6a06eede76b15f75694a17'/>
		<source addr='http://prdownloads.sourceforge.net/crayzedsgui/CEGUI-0.5.0b.tar.gz'
						method='wget' renamefrom='CEGUI-0.5.0'
						md5='b42322a33c6a06eede76b15f75694a17'/>
		-->
		<source addr='http://7d7.almlys.org/downloads/depends/cegui/CEGUI-0.6.1.tar.gz'
						method='wget' renamefrom='CEGUI-0.6.1'
						md5='aee37f8532ecbdc0b87efbaebafdf148'/>
		<source addr='http://prdownloads.sourceforge.net/crayzedsgui/CEGUI-0.6.1.tar.gz'
						method='wget' renamefrom='CEGUI-0.6.1'
						md5='aee37f8532ecbdc0b87efbaebafdf148'/>


		<build>
			<cmd>./configure --prefix=$PREFIX --without-ogre-renderer --with-default-image-codec=FreeImageImageCodec --with-default-xml-parser=ExpatParser --enable-freeimage --enable-samples --disable-tinyxml --enable-expat </cmd>
			<cmd>make -j 2</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>
	
	
	<module name='ogre' ignore='no' depends='cg,openexr,cegui,ois,boost'>
		<comment>
			The mother of the world
		</comment>
		<license>(dual) LGPLv2.1 or later / unrestricted(comercial)</license>
		<source addr='http://7d7.almlys.org/downloads/depends/ogre/ogre-v1-4-9.tar.bz2'
						method='wget' renamefrom='ogre'
						md5='8a73fbcf42fd6b156b2567839d0cd125' />
		<source addr='http://prdownloads.sourceforge.net/ogre/ogre-v1-4-9.tar.bz2'
						method='wget' renamefrom='ogre'
						md5='8a73fbcf42fd6b156b2567839d0cd125' />
		<!-- Some patches should be added here!! -->
		<build>
			<!--<cmd>./configure - - prefix=$PREFIX - - enable-openexr - - enable-threading</cmd>-->
			<cmd>./configure --prefix=$PREFIX  --exec-prefix=$PREFIX --libdir=$PREFIX/lib --enable-openexr --with-gui=Xt --disable-devil --enable-freeimage</cmd>
			<cmd>make -j 2</cmd>
			<cmd>sed --in-place -s "s|/usr/local/lib/OGRE|${PREFIX}/lib/OGRE|" Samples/Common/bin/plugins.cfg</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
		</install>
	</module>

	<module name='gccxml' ignore='no'>
		<comment>
			C++ to xml generator
			Latest stable version is too old, soo we need to get latest **unstable** from cvs (cross fingers)
		</comment>
		<license>GPLv2 or later</license>
		<source addr='http://7d7.almlys.org/downloads/depends/gccxml/gccxml20080727.tar.bz2'
						method='wget' renamefrom='gccxml'
						md5='be6e0a5c5f4b92c4294a376b9904ca8f'
						branch='stable' />

		<source addr=':pserver:anoncvs@www.gccxml.org:/cvsroot/GCC_XML'
						method='cvs' module='gccxml' revision='20080727'
						branch='stable' />
		<source addr=':pserver:anoncvs@www.gccxml.org:/cvsroot/GCC_XML'
						method='cvs' module='gccxml'
						branch='devel' />
		<build>
			<cmd cmd='mkdir' path='gccxml-build' />
			<cmd cmd='cd' path='gccxml-build' />
			<cmd>cmake ../ -DCMAKE_INSTALL_PREFIX:PATH=$PREFIX</cmd>
			<cmd>make</cmd>
		</build>
		<install>
			<cmd cmd='cd' path='gccxml-build' />
			<cmd>make install</cmd>
		</install>
	</module>
	
	<module name='pygccxml' ignore='no' depends='gccxml'>
		<comment>
			py++
			Code generator for Boost.Python
		</comment>
		<license>Boost</license>
		<source addr='http://7d7.almlys.org/downloads/depends/pygccxml/pygccxml20080727.tar.bz2'
						method='wget' renamefrom='pygccxml'
						md5='03ef0633b7e028d834fe44f362092173'
						branch='stable' />
		<source addr='https://pygccxml.svn.sourceforge.net/svnroot/pygccxml'
						method='svn' revision='1379'
						branch='stable' />
		<source addr='https://pygccxml.svn.sourceforge.net/svnroot/pygccxml'
						method='svn'
						branch='devel' />
		<install>
			<cmd cmd='cd' path='pygccxml_dev' />
			<cmd>python setup.py install --prefix=$PREFIX</cmd>
			<cmd cmd='cd' path='../pyplusplus_dev' />
			<cmd>python setup.py install --prefix=$PREFIX</cmd>
		</install>
	</module>

	<module name='scons' ignore='no'>
		<comment>
			Build tool, required to build some packages
			python setup.py install --prefix=$PREFIX
		</comment>
		<license>MIT</license>
		<source addr='http://7d7.almlys.org/downloads/depends/scons/scons-0.98.5.tar.gz'
						method='wget' renamefrom='scons-0.98.5'
						md5='640dfc99a29523a06dbeaac299a3e0a0' />
		<source addr='http://prdownloads.sourceforge.net/scons/scons-0.98.5.tar.gz'
						method='wget' renamefrom='scons-0.98.5'
						md5='640dfc99a29523a06dbeaac299a3e0a0' />

		<install>
			<cmd>python setup.py install --prefix=$PREFIX</cmd>
		</install>
	</module>

	<module name='boost' ignore='no' depends='pygccxml'>
		<comment>
			Boost Libraries
			# Need to patch??
		</comment>
		<license>Boost</license>
		<!-- <source addr='http://7d7.almlys.org/downloads/depends/boost/boost_1_34_1.tar.bz2'
						method='wget' renamefrom='boost_1_34_1'
						md5='2d938467e8a448a2c9763e0a9f8ca7e5' />
		<source addr='http://downloads.sourceforge.net/boost/boost_1_34_1.tar.bz2'
						method='wget' renamefrom='boost_1_34_1'
						md5='2d938467e8a448a2c9763e0a9f8ca7e5' /> -->
		<source addr='http://7d7.almlys.org/downloads/depends/boost/boost_1_35_0.tar.bz2'
						method='wget' renamefrom='boost_1_35_0'
						md5='dce952a7214e72d6597516bcac84048b' />
		<source addr='http://downloads.sourceforge.net/boost/boost_1_35_0.tar.bz2'
						method='wget' renamefrom='boost_1_35_0'
						md5='dce952a7214e72d6597516bcac84048b' />
		<patch addr='boost.patch' />
		<build>
			<!-- Begin Dirty Hack -->
			<cmd>cp -v ../pygccxml/pyplusplus_dev/indexing_suite_v2/indexing/*.hpp boost/python/suite/indexing</cmd>
			<cmd>cp -rvf ../pygccxml/pyplusplus_dev/indexing_suite_v2/src/indexing libs/python/src</cmd>
			<!-- End Dirty Hack -->
			<!-- <cmd>./configure - - with-libraries=python,thread - - prefix=$PREFIX</cmd> -->
			<cmd>./configure --with-libraries=python --prefix=$PREFIX</cmd>
			<cmd>sed -i s/BJAM_CONFIG=/BJAM_CONFIG=release/ Makefile</cmd>
			<cmd>make</cmd>
		</build>
		<install>
			<cmd>make install</cmd>
			<!-- This is ugly -->
			<!--
			<cmd cmd='cd' path='${PREFIX}/lib' />
			<cmd>ln -fs libboost_thread-gcc${MY_GCC_VERSION-mt.so}-mt.so libboost_thread-mt.so</cmd>
			-->
			<cmd cmd='cd' path='${PREFIX}/include' />
			<cmd>ln -fs boost-1_35/boost boost</cmd>
			<!-- Argh -->
		</install>
	</module>

	
	<module name='python-ogre' ignore='no' depends='ogre,pygccxml,scons,boost'>
		<comment>
			Python-Ogre
		</comment>
		<license>LGPLv2 or later</license>
		<!-- <source addr='http://7d7.almlys.org/downloads/depends/python-ogre/python-ogre20080318.tar.bz2'
						method='wget' renamefrom='python-ogre'
						md5='e59e2f41d9a3c271f0574373c4e5dd47'
						branch='stable' /> -->
		<source addr='http://7d7.almlys.org/downloads/depends/python-ogre/python-ogre20080727.tar.bz2'
						method='wget' renamefrom='python-ogre'
						md5='39f9d4283c569ee3b1e9dd182f9072bf'
						branch='stable' />

		<source addr='https://python-ogre.svn.sourceforge.net/svnroot/python-ogre/trunk/python-ogre'
						method='svn' revision='674'
						branch='stable' />
		<source addr='https://python-ogre.svn.sourceforge.net/svnroot/python-ogre/trunk/python-ogre'
						method='svn'
						branch='devel' />
		<patch addr='python-ogre.patch' />
		<build>
			<cmd>echo "OK. LONG BUILD PROCESS STARTS NOW!!! - LEFT YOUR COMPUTER ON, AND COME TOMORROW!!"</cmd>

			<cmd cmd='cd' path='code_generators/ogre' />
			<cmd>echo "Generating Ogre Code ......."</cmd>
			<cmd>python generate_code.py</cmd>
			<cmd cmd='cd' path='../..' />
			
			<cmd cmd='cd' path='code_generators/cegui' />
			<cmd>echo "Generating CEGUI Code ......."</cmd>
			<cmd>python generate_code.py</cmd>
			<cmd cmd='cd' path='../..' />

			<cmd cmd='cd' path='code_generators/ois' />
			<cmd>echo "Generating OIS Code ......."</cmd>
			<cmd>python generate_code.py</cmd>
			<cmd cmd='cd' path='../..' />

			<cmd>echo "Building Ogre ......."</cmd>
			<cmd>scons PROJECTS="ogre"</cmd>

			<cmd>echo "Building CEGUI ......."</cmd>
			<cmd>scons PROJECTS="cegui"</cmd>
			
			<cmd>echo "Building OIS ......."</cmd>
			<cmd>scons PROJECTS="ois"</cmd>

			<cmd>echo "CONGRATULATIONS!!, everything has sucessfully being build!!!!"</cmd>
		</build>
		
		<install>
			<cmd>cp -rfv packages_2.5/ogre/gui/betagui packages_2.4/ogre/gui</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/bullet packages_2.4/ogre/physics</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/PhysX packages_2.4/ogre/physics</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/NxOgre packages_2.4/ogre/physics</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/NxOgre packages_2.4/ogre/physics/NxOgre_09</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/NxOgre packages_2.5/ogre/physics/NxOgre_09</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/OgreBulletC packages_2.4/ogre/physics</cmd>
			<cmd>cp -rfv packages_2.5/ogre/physics/OgreBulletD packages_2.4/ogre/physics</cmd>
			<cmd>cp -rfv packages_2.5/ogre/addons packages_2.4/ogre</cmd>
			<cmd>cp -rfv packages_2.5/ogre/gui/navi packages_2.4/ogre/gui</cmd>
			<cmd>python setup.py install --prefix=$PREFIX</cmd>
		</install>
	</module>
	
	<module name='sd7' depends='python-ogre' >
		<comment>
			sd7 real time 3d engine
		</comment>
		<license>GPLv3 or later</license>
	</module>
	
	<module name='binary_depends' ignore='no'>
		<comment>
			Big package that contains all the above stuff mixed in one item
		</comment>
		<license>GPLv3 or later</license>
		<!--
		<source addr='http://7d7.almlys.org/downloads/builds/runtime_i686_py24_20080129.tar.bz2'
						method='wget' renamefrom='runtime'
						md5='3b00c3a2591fa481ea54a8e7a4fda288'
						platform='linux' arch='i686' python='2.4' />
		-->
		<!--<source addr='http://7d7.almlys.org/downloads/builds/sd7runtime_linux_i686_py24_20080206001024.tar.bz2'
						method='wget' renamefrom='sd7runtime_linux_i686_py24'
						md5='727ecb5222dda896400965a090cc5fe9'
						platform='linux' arch='i686' python='2.4' />
		<source addr='http://7d7.almlys.org/downloads/builds/sd7runtime_linux_i686_py25_20080207110502.tar.bz2'
						method='wget' renamefrom='sd7runtime_linux_i686_py25'
						md5='68b6754e67006a28187b1603a9dce657'
						platform='linux' arch='i686' python='2.5' /> -->
		<source addr='http://7d7.almlys.org/downloads/builds/sd7runtime_linux_i686_py24_20080320171926.tar.bz2'
						method='wget' renamefrom='sd7runtime_linux_i686_py24'
						md5='b308ac56dcd2e9219c33c3436939f17b'
						platform='linux' arch='i686' python='2.4' />
		<source addr='http://7d7.almlys.org/downloads/builds/sd7runtime_linux_i686_py25_20080320210336.tar.bz2'
						method='wget' renamefrom='sd7runtime_linux_i686_py25'
						md5='b61ab125eb50445894858fa199c73d2e'
						platform='linux' arch='i686' python='2.5' />

		<install>
			<cmd>mv -vf * $PREFIX</cmd>
			<cmd cmd='cd' path='../' />
			<cmd>rmdir binary_depends</cmd>
		</install>
	</module>
	
</bootstrap>
